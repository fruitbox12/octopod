sequenceDiagram
    participant UI
    participant DMS
    participant PostgreSQL
    participant DMS/BgWorker
    participant DMS/StatusUpdater
    participant AppWrappers
    participant KubeAPI
    UI->>DMS: cleanup(name)
    DMS->>DMS/BgWorker: cleanup
    DMS->>UI: done
    DMS/BgWorker->>AppWrappers: cleanup
    AppWrappers->>KubeAPI: cleanup staging resources using kubectl
    KubeAPI->>AppWrappers: done
    AppWrappers->>DMS/BgWorker: done
    DMS->>PostgreSQL: delete config and logs
    DMS/BgWorker->>UI: event FrontendPleaseUpdateEverything
